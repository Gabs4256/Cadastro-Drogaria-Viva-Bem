busca de cep em js
<script>
  const cepInput = document.getElementById('cep');
  const ruaInput = document.getElementById('rua');
  const bairroInput = document.getElementById('bairro');
  const cidadeInput = document.getElementById('cidade');

  // função para formatar o CEP com máscara (00000-000)
  cepInput.addEventListener('input', () => {
    let cep = cepInput.value.replace(/\D/g, '');
    if (cep.length > 8) cep = cep.slice(0, 8);
    if (cep.length > 5) cep = cep.replace(/(\d{5})(\d{1,3})/, '$1-$2');
    cepInput.value = cep;
  });

  // busca dados no ViaCEP quando o campo perde o foco
  cepInput.addEventListener('blur', async () => {
    const cep = cepInput.value.replace(/\D/g, '');
    if (cep.length === 8) {
      try {
        const response = await fetch(`https://viacep.com.br/ws/${cep}/json/`);
        const data = await response.json();

        if (data.erro) {
          alert('CEP não encontrado.');
          ruaInput.value = '';
          cidadeInput.value = '';
          return;
        }

        // preenche automaticamente
        ruaInput.value = data.logradouro || '';
        bairroInput.value = data.bairro || '';
        cidadeInput.value = data.localidade || '';

      } catch (error) {
        alert('Erro ao buscar o CEP. Tente novamente.');
      }
    }
  });
</script>